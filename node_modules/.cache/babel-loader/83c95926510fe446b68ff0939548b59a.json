{"ast":null,"code":"import shop from '../api/shop';\nimport * as types from '../constants/ActionTypes';\n\nvar receiveProducts = function receiveProducts(products) {\n  return {\n    type: types.RECEIVE_PRODUCTS,\n    products: products\n  };\n};\n\nexport var getAllProducts = function getAllProducts() {\n  return function (dispatch) {\n    shop.getProducts(function (products) {\n      dispatch(receiveProducts(products));\n    });\n  };\n};\n\nvar addToCartUnsafe = function addToCartUnsafe(productId) {\n  return {\n    type: types.ADD_TO_CART,\n    productId: productId\n  };\n};\n\nexport var addToCart = function addToCart(productId) {\n  return function (dispatch, getState) {\n    if (getState().products.byId[productId].inventory > 0) {\n      dispatch(addToCartUnsafe(productId));\n    }\n  };\n};\nexport var checkout = function checkout(products) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        cart = _getState.cart;\n\n    dispatch({\n      type: types.CHECKOUT_REQUEST\n    });\n    shop.buyProducts(products, function () {\n      dispatch({\n        type: types.CHECKOUT_SUCCESS,\n        cart: cart\n      }); // Replace the line above with line below to rollback on failure:\n      // dispatch({ type: types.CHECKOUT_FAILURE, cart })\n    });\n  };\n};","map":{"version":3,"sources":["/home/teknotrait/Desktop/Biswajit/Online-Shopping-Cart/src/actions/index.js"],"names":["shop","types","receiveProducts","products","type","RECEIVE_PRODUCTS","getAllProducts","dispatch","getProducts","addToCartUnsafe","productId","ADD_TO_CART","addToCart","getState","byId","inventory","checkout","cart","CHECKOUT_REQUEST","buyProducts","CHECKOUT_SUCCESS"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,aAAjB;AACA,OAAO,KAAKC,KAAZ,MAAuB,0BAAvB;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,QAAQ;AAAA,SAAK;AACnCC,IAAAA,IAAI,EAAEH,KAAK,CAACI,gBADuB;AAEnCF,IAAAA,QAAQ,EAARA;AAFmC,GAAL;AAAA,CAAhC;;AAKA,OAAO,IAAMG,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAM,UAAAC,QAAQ,EAAI;AAC9CP,IAAAA,IAAI,CAACQ,WAAL,CAAiB,UAAAL,QAAQ,EAAI;AAC3BI,MAAAA,QAAQ,CAACL,eAAe,CAACC,QAAD,CAAhB,CAAR;AACD,KAFD;AAGD,GAJ6B;AAAA,CAAvB;;AAMP,IAAMM,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,SAAS;AAAA,SAAK;AACpCN,IAAAA,IAAI,EAAEH,KAAK,CAACU,WADwB;AAEpCD,IAAAA,SAAS,EAATA;AAFoC,GAAL;AAAA,CAAjC;;AAKA,OAAO,IAAME,SAAS,GAAG,SAAZA,SAAY,CAAAF,SAAS;AAAA,SAAI,UAACH,QAAD,EAAWM,QAAX,EAAwB;AAC5D,QAAIA,QAAQ,GAAGV,QAAX,CAAoBW,IAApB,CAAyBJ,SAAzB,EAAoCK,SAApC,GAAgD,CAApD,EAAuD;AACrDR,MAAAA,QAAQ,CAACE,eAAe,CAACC,SAAD,CAAhB,CAAR;AACD;AACF,GAJiC;AAAA,CAA3B;AAMP,OAAO,IAAMM,QAAQ,GAAG,SAAXA,QAAW,CAAAb,QAAQ;AAAA,SAAI,UAACI,QAAD,EAAWM,QAAX,EAAwB;AAAA,oBACzCA,QAAQ,EADiC;AAAA,QAClDI,IADkD,aAClDA,IADkD;;AAG1DV,IAAAA,QAAQ,CAAC;AACPH,MAAAA,IAAI,EAAEH,KAAK,CAACiB;AADL,KAAD,CAAR;AAGAlB,IAAAA,IAAI,CAACmB,WAAL,CAAiBhB,QAAjB,EAA2B,YAAM;AAC/BI,MAAAA,QAAQ,CAAC;AACPH,QAAAA,IAAI,EAAEH,KAAK,CAACmB,gBADL;AAEPH,QAAAA,IAAI,EAAJA;AAFO,OAAD,CAAR,CAD+B,CAK/B;AACA;AACD,KAPD;AAQD,GAd+B;AAAA,CAAzB","sourcesContent":["import shop from '../api/shop'\nimport * as types from '../constants/ActionTypes'\n\nconst receiveProducts = products => ({\n  type: types.RECEIVE_PRODUCTS,\n  products\n})\n\nexport const getAllProducts = () => dispatch => {\n  shop.getProducts(products => {\n    dispatch(receiveProducts(products))\n  })\n}\n\nconst addToCartUnsafe = productId => ({\n  type: types.ADD_TO_CART,\n  productId\n})\n\nexport const addToCart = productId => (dispatch, getState) => {\n  if (getState().products.byId[productId].inventory > 0) {\n    dispatch(addToCartUnsafe(productId))\n  }\n}\n\nexport const checkout = products => (dispatch, getState) => {\n  const { cart } = getState()\n\n  dispatch({\n    type: types.CHECKOUT_REQUEST\n  })\n  shop.buyProducts(products, () => {\n    dispatch({\n      type: types.CHECKOUT_SUCCESS,\n      cart\n    })\n    // Replace the line above with line below to rollback on failure:\n    // dispatch({ type: types.CHECKOUT_FAILURE, cart })\n  })\n}\n"]},"metadata":{},"sourceType":"module"}